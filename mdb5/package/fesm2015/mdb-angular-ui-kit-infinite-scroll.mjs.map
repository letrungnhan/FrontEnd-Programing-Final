{"version":3,"file":"mdb-angular-ui-kit-infinite-scroll.mjs","sources":["../../../projects/mdb-angular-ui-kit/infinite-scroll/infinite-scroll.directive.ts","../../../projects/mdb-angular-ui-kit/infinite-scroll/infinite-scroll.module.ts","../../../projects/mdb-angular-ui-kit/infinite-scroll/mdb-angular-ui-kit-infinite-scroll.ts"],"sourcesContent":["import { BooleanInput, coerceBooleanProperty } from '@angular/cdk/coercion';\nimport { DOCUMENT } from '@angular/common';\nimport {\n  Directive,\n  ElementRef,\n  EventEmitter,\n  Inject,\n  Input,\n  NgZone,\n  OnInit,\n  Output,\n} from '@angular/core';\nimport { fromEvent, Subject } from 'rxjs';\nimport { takeUntil } from 'rxjs/operators';\n\nexport type MdbInfiniteScrollDirection = 'horizontal' | 'vertical';\n\n@Directive({\n  // eslint-disable-next-line @angular-eslint/directive-selector\n  selector: '[mdbInfiniteScroll]',\n})\nexport class MdbInfiniteScrollDirective implements OnInit {\n  @Input() direction: MdbInfiniteScrollDirection = 'vertical';\n  @Input() container: HTMLElement;\n\n  @Input()\n  get window(): boolean {\n    return this._window;\n  }\n  set window(value: boolean) {\n    this._window = coerceBooleanProperty(value);\n  }\n  private _window = false;\n\n  @Output() infiniteScrollCompleted: EventEmitter<any> = new EventEmitter<any>();\n\n  readonly _destroy$: Subject<void> = new Subject<void>();\n\n  constructor(\n    private _elementRef: ElementRef,\n    private _ngZone: NgZone,\n    @Inject(DOCUMENT) private _document: any\n  ) {}\n\n  get host(): HTMLElement {\n    return this.container ? this.container : this._elementRef.nativeElement;\n  }\n\n  ngOnInit(): void {\n    const target = this.window ? window : this.host;\n    this._ngZone.runOutsideAngular(() => {\n      fromEvent(target, 'scroll')\n        .pipe(takeUntil(this._destroy$))\n        .subscribe(() => {\n          if (this._isCompleted()) {\n            this._ngZone.run(() => {\n              this.infiniteScrollCompleted.emit();\n            });\n          }\n        });\n    });\n  }\n\n  private _isCompleted() {\n    if (this.window) {\n      return this._isCompletedWindow();\n    }\n\n    return this.isCompletedContainer();\n  }\n\n  private isCompletedContainer(): boolean {\n    const rect = this.host.getBoundingClientRect();\n\n    if (this.direction === 'vertical') {\n      return rect.height + this.host.scrollTop >= this.host.scrollHeight;\n    } else {\n      return rect.width + this.host.scrollLeft + 10 >= this.host.scrollWidth;\n    }\n  }\n\n  private _isCompletedWindow(): boolean {\n    return window.scrollY + window.innerHeight === this._document.documentElement.scrollHeight;\n  }\n\n  static ngAcceptInputType_window: BooleanInput;\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { MdbInfiniteScrollDirective } from './infinite-scroll.directive';\n\n@NgModule({\n  imports: [CommonModule],\n  declarations: [MdbInfiniteScrollDirective],\n  exports: [MdbInfiniteScrollDirective],\n})\nexport class MdbInfiniteScrollModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":[],"mappings":"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"}